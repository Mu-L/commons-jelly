<?xml version="1.0"?>

<!--
This test shows coordinating between 2 threads using
mutexes with wait/notify. Numbers between threads
should increment together.
-->

<jelly xmlns="jelly:core" xmlns:threads="jelly:threads">
    <threads:thread var="thread1">

        <whitespace>
        thread1: going to sleep for 2 seconds
        </whitespace>

        <threads:sleep for="2000"/>
    </threads:thread>

    <threads:thread var="thread2">
        <threads:waitfor thread="${thread1}"/>

        <whitespace>
        thread2: finished waiting for thread1, sleeping for 2 seconds
        </whitespace>

        <threads:sleep for="1000"/>
    </threads:thread>

    <threads:thread>
        <threads:waitfor thread="${thread1}"/>

        <whitespace>
        thread3: finished waiting for thread1
        </whitespace>

    </threads:thread>

    <threads:thread>
        <threads:waitfor thread="${thread2}"/>

        <whitespace>
        thread4: finished waiting for thread2
        </whitespace>

    </threads:thread>
</jelly>