<j:jelly xmlns:j="jelly:core">
    <j:switch on="${switch.on.a}">
        <j:case value="one" fallThru="true">
            <j:set var="a.one" value="true"/>
        </j:case>
        <j:case value="two">
            <j:set var="a.two" value="true"/>
        </j:case>
        <j:case value="three">
            <j:set var="a.three" value="true"/>
        </j:case>
        <j:case value="${null}">
            <j:set var="a.null" value="true"/>
        </j:case>
        <j:default>
            <j:set var="a.default" value="true"/>
        </j:default>
    </j:switch>
    
    <j:if test="${switch.without.on}">
        <j:switch>
            <j:case value="one" fallThru="true"/>
            <j:case value="two"/>
            <j:case value="three"/>
            <j:case value="${null}"/>
            <j:default/>
        </j:switch>
    </j:if>

    <j:if test="${case.without.switch}">
        <j:case value="this tag should cause an exception"/>
    </j:if>
    
    <j:if test="${default.without.switch}">
        <j:default/>
    </j:if>

    <j:if test="${case.without.value}">
        <j:switch on="foo">
            <j:case>
                <!-- this should cause an exception (or even better, fail on validation) -->
            </j:case>
        </j:switch>
    </j:if>
    
    <j:if test="${multiple.defaults}">
        <j:switch on="foo">
            <j:case value="bar">
            </j:case>
            <j:default>
            </j:default>
            <j:default>
                <!-- this one should cause an exception (or even better, fail on validation) -->
            </j:default>
        </j:switch>
    </j:if>
    
    <j:if test="${case.after.default}">
        <j:switch on="foo">
            <j:default>
            </j:default>
            <j:case value="bar">
                <!-- this one should cause an exception (or even better, fail on validation) -->
            </j:case>
        </j:switch>
    </j:if>

</j:jelly>
