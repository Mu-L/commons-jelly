<?xml version="1.0"?>
<j:jelly 
	xmlns:j="jelly:core" 
	xmlns="jelly:swing" 
	xmlns:log="jelly:log">

	<!-- create the generate page action -->

	<action var="createPageAction" name="Build and preview your page!">
		<j:set var="name" value="${nameField.text}"/>
		<j:set var="background" value="${colorField.text}"/>
		<j:set var="url" value="${pictureField.text}"/>
		<j:set var="hobbies" value="${hobbyModel.toArray()}"/>
		<j:set var="template" value="${templateField.getSelectedItem().toString()}"/>
		
		<log:info>name = ${name}</log:info>
		<log:info>background = ${background}</log:info>
		<log:info>url = ${url}</log:info>
		<log:info>hobbies = ${hobbies}</log:info>
		<log:info>template = ${template}</log:info>
		
		<j:file name="demopage.html" outputMode="html">
			<j:include uri="${template}"/>
		</j:file>

		<frame var="showPageFrame" size="500,600" location="200,200" title="Your Homepage">
			<scrollPane>
				<editorPane page="${context.getResource('/demopage.html').toString()}" editable="false"/>
			</scrollPane>
		</frame>
		${showPageFrame.show()}
	</action>


	<!-- create the Frame -->
	
  <frame var="frame" title="Homepage Builder" location="100,100" size="800,400">
		<panel>

<!-- uncomment this when we've implemented emptyBorder
	
			<emptyBorder top="20" left="20" bottom="20" right="20" />			
-->		
			<borderLayout>				  	
				<borderAlign align="west">
			  	<vbox>
			  		<label text="Name:"/>
			  		<textField var="nameField" text="James Bond"/>
			
			  		<label text="Favourite Color:"/>
			  		<textField var="colorField" text="#007007"/>
			  		
			  		<label text="Picture URL::"/>
			  		<textField var="pictureField" text="http://www.ianfleming.org/007news/images3/c2002_pierce1.jpg"/>
			  		
			  		<label text="Choose template::"/>
			  		<comboBox var="templateField"/>
			  		${templateField.addItem('template1.jelly')}
			  		${templateField.addItem('template2.jelly')}
			  		
			  		<label text="Add a Hobby:"/>
			  		<textField var="hobbyField"/>
			  		
			  		<button>
			  			<action name="Add >>>">
			  				${hobbyModel.addElement(hobbyField.text)}
							</action>
			  		</button>
			  	</vbox>
				</borderAlign>
				
				<borderAlign align="east">  	
			  	<scrollPane>
			  		<j:useBean class="javax.swing.DefaultListModel" var="hobbyModel"/>
						<list model="${hobbyModel}"/>
						${hobbyModel.addElement('Killing bad guys')}
						${hobbyModel.addElement('Wrecking cars')}
						${hobbyModel.addElement('Eating jelly')}
			  	</scrollPane>
				</borderAlign>
				
				<borderAlign align="south">  	
			  	<button action="${createPageAction}"/>
				</borderAlign>
			</borderLayout>
		</panel>
	</frame>

	${frame.show()}

</j:jelly>
