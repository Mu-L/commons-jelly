<?xml version="1.0"?>
<j:jelly xmlns:j="jelly:core" xmlns="jelly:jeez">

  Defining the listFiles tag...

  <!-- this tag iterates through a directory displaying the files -->    
  <tagdef name="listFiles">
  	Scanning directory: ${dir} includes: ${includes}
  	
    <fileScanner var="scanner">
      <fileset dir="${dir}" includes="${includes}" excludes="${excludes}"/>
    </fileScanner>
    
    <j:forEach var="file" items="${scanner.iterator()}">
      Found ${file.absolutePath}
    </j:forEach>
  </tagdef>
	
  Now lets use the new listFiles tag	
	
  <listFiles dir="src/test" includes="**/*.jelly"/>
  
  <listFiles dir="." includes="*.xml"/>
  	

</j:jelly>
