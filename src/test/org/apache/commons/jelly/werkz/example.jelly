<?xml version="1.0"?>

<werkz:project xmlns:j="jelly:core" xmlns="jelly:ant" xmlns:werkz="jelly:werkz">

  <!-- the following could be in the mediator of Maven -->
  <werkz:goal name="init">
  	<echo message="Running init goal's action"/>
  </werkz:goal>
  		
  <werkz:goal name="compile" prereqs="init">
  	<echo message="Running compile goal's action"/>
  </werkz:goal>

  <werkz:goal name="test" prereqs="init,compile">
  	<echo message="Running test goal's action"/>
  </werkz:goal>


 <!-- define some callbacks in the projects build.jelly -->
 <werkz:preGoal name="compile">
 	<echo message="I am a callback: doing something before I compile"/> 	  		
 </werkz:preGoal>


  <!-- call all the targets made on the command line -->	
  <werkz:attain>
  	   <echo>-------------------------------------</echo>
           <echo>jelly+werkz+ant-taskdefs</echo>
  	   <echo>-------------------------------------</echo>
      <j:forEach var="arg" items="${args}" begin="1">
  	   <echo>begin target [<j:expr value="${arg}"/>]</echo>
  	   <echo>-------------------------------------</echo>
           <werkz:attainGoal name="${arg}"/>
  	   <echo>end target [<j:expr value="${arg}"/>]</echo>
  	   <echo>-------------------------------------</echo>
      </j:forEach>
  </werkz:attain>
  	
</werkz:project>



